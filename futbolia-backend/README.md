# ğŸ† FutPredicIA Backend - Dixie AI

Backend API para FutPredicIA, una plataforma de predicciones deportivas impulsada por IA.

## ğŸ“‹ Tabla de Contenidos

- [Arquitectura](#-arquitectura)
- [Flujo del Programa](#-flujo-del-programa)
- [InstalaciÃ³n](#-instalaciÃ³n)
- [ConfiguraciÃ³n](#-configuraciÃ³n)
- [EjecuciÃ³n](#-ejecuciÃ³n)
- [API Endpoints](#-api-endpoints)
- [Estructura del Proyecto](#-estructura-del-proyecto)
- [DocumentaciÃ³n TÃ©cnica Detallada](TECHNICAL_DOCUMENTATION.md)

---

## ğŸ—ï¸ Arquitectura

El backend sigue **Clean Architecture** con las siguientes capas:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PRESENTATION LAYER                        â”‚
â”‚              (FastAPI Routes & Controllers)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      USE CASES LAYER                         â”‚
â”‚           (Business Logic & Application Services)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    INFRASTRUCTURE LAYER                      â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ MongoDB  â”‚  â”‚ ChromaDB â”‚  â”‚ DeepSeek â”‚  â”‚ External â”‚  â”‚
â”‚    â”‚   (DB)   â”‚  â”‚  (RAG)   â”‚  â”‚  (LLM)   â”‚  â”‚   APIs   â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      DOMAIN LAYER                            â”‚
â”‚              (Entities & Business Rules)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Flujo del Programa

### 1ï¸âƒ£ Inicio del Servidor

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STARTUP SEQUENCE                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   1. Load .env file     â”‚
              â”‚   (python-dotenv)       â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ 2. Initialize Settings  â”‚
              â”‚ (src/core/config.py)    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  3. Connect MongoDB     â”‚
              â”‚  (Motor async client)   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ 4. Initialize ChromaDB  â”‚
              â”‚ (Vector embeddings)     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  5. Seed Player Data    â”‚
              â”‚  (46 FIFA players)      â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ 6. Initialize Dixie AI  â”‚
              â”‚ (DeepSeek connection)   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  7. Start FastAPI       â”‚
              â”‚  (Uvicorn server)       â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                 ğŸš€ Server Ready!
              http://localhost:8000
```

### 2ï¸âƒ£ Flujo de AutenticaciÃ³n

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 AUTHENTICATION FLOW                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ğŸ“± Cliente                                      ğŸ–¥ï¸ Backend
      â”‚                                               â”‚
      â”‚  POST /api/v1/auth/register                  â”‚
      â”‚  {email, username, password}                 â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
      â”‚                                               â”‚
      â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚                    â”‚ 1. Validate email format â”‚
      â”‚                    â”‚ 2. Check if user exists  â”‚
      â”‚                    â”‚ 3. Hash password (bcrypt)â”‚
      â”‚                    â”‚ 4. Save to MongoDB       â”‚
      â”‚                    â”‚ 5. Generate JWT token    â”‚
      â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚                                               â”‚
      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
      â”‚  {access_token, token_type: "bearer"}        â”‚
      â”‚                                               â”‚
      â”‚  POST /api/v1/auth/login                     â”‚
      â”‚  {email, password}                           â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
      â”‚                                               â”‚
      â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚                    â”‚ 1. Find user by email    â”‚
      â”‚                    â”‚ 2. Verify password hash  â”‚
      â”‚                    â”‚ 3. Generate new JWT      â”‚
      â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚                                               â”‚
      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
      â”‚  {access_token, token_type: "bearer"}        â”‚
```

### 3ï¸âƒ£ Flujo de PredicciÃ³n (Core Feature)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PREDICTION FLOW                            â”‚
â”‚            "El corazÃ³n de FutbolIA"                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ğŸ“± Cliente                                      ğŸ–¥ï¸ Backend
      â”‚                                               â”‚
      â”‚  POST /api/v1/predictions/predict            â”‚
      â”‚  Authorization: Bearer <token>               â”‚
      â”‚  {home_team, away_team}                      â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
      â”‚                                               â”‚
      â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚         â”‚         STEP 1: RAG                 â”‚
      â”‚         â”‚    ChromaDB Vector Search           â”‚
      â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚         â”‚                                     â”‚
      â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
      â”‚         â”‚  â”‚  ChromaDB   â”‚                   â”‚
      â”‚         â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚                   â”‚
      â”‚         â”‚  â”‚ Query:      â”‚                   â”‚
      â”‚         â”‚  â”‚ "Real Madridâ”‚                   â”‚
      â”‚         â”‚  â”‚  players"   â”‚                   â”‚
      â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                   â”‚
      â”‚         â”‚         â”‚                          â”‚
      â”‚         â”‚         â–¼                          â”‚
      â”‚         â”‚  Player Embeddings:                â”‚
      â”‚         â”‚  â€¢ Vinicius Jr (OVR: 89)          â”‚
      â”‚         â”‚  â€¢ Bellingham (OVR: 88)           â”‚
      â”‚         â”‚  â€¢ MbappÃ© (OVR: 91)               â”‚
      â”‚         â”‚  â€¢ Courtois (OVR: 89)             â”‚
      â”‚         â”‚                                    â”‚
      â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚         â”‚         STEP 2: LLM                â”‚
      â”‚         â”‚      Dixie AI Analysis             â”‚
      â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚         â”‚                                     â”‚
      â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
      â”‚         â”‚  â”‚  DeepSeek   â”‚                   â”‚
      â”‚         â”‚  â”‚   (Dixie)   â”‚                   â”‚
      â”‚         â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚                   â”‚
      â”‚         â”‚  â”‚ Prompt:     â”‚                   â”‚
      â”‚         â”‚  â”‚ - Match infoâ”‚                   â”‚
      â”‚         â”‚  â”‚ - Player    â”‚                   â”‚
      â”‚         â”‚  â”‚   stats     â”‚                   â”‚
      â”‚         â”‚  â”‚ - Context   â”‚                   â”‚
      â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                   â”‚
      â”‚         â”‚         â”‚                          â”‚
      â”‚         â”‚         â–¼                          â”‚
      â”‚         â”‚  AI Analysis:                      â”‚
      â”‚         â”‚  â€¢ Winner prediction              â”‚
      â”‚         â”‚  â€¢ Score prediction               â”‚
      â”‚         â”‚  â€¢ Confidence %                   â”‚
      â”‚         â”‚  â€¢ Key factors                    â”‚
      â”‚         â”‚  â€¢ Tactical analysis              â”‚
      â”‚         â”‚                                    â”‚
      â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚         â”‚         STEP 3: SAVE               â”‚
      â”‚         â”‚      Store in MongoDB              â”‚
      â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚         â”‚                                     â”‚
      â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
      â”‚         â”‚  â”‚   MongoDB   â”‚                   â”‚
      â”‚         â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚                   â”‚
      â”‚         â”‚  â”‚ predictions â”‚                   â”‚
      â”‚         â”‚  â”‚ collection  â”‚                   â”‚
      â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
      â”‚         â”‚                                     â”‚
      â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚                                               â”‚
      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
      â”‚  {                                           â”‚
      â”‚    match: {...},                             â”‚
      â”‚    result: {                                 â”‚
      â”‚      winner: "Real Madrid",                  â”‚
      â”‚      score: "2-1",                           â”‚
      â”‚      confidence: 75,                         â”‚
      â”‚      analysis: "...",                        â”‚
      â”‚      key_factors: [...],                     â”‚
      â”‚      player_to_watch: "Vinicius Jr"         â”‚
      â”‚    }                                         â”‚
      â”‚  }                                           â”‚
```

### 4ï¸âƒ£ Diagrama de Componentes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COMPONENT DIAGRAM                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   FastAPI    â”‚
                        â”‚    Server    â”‚
                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                â”‚                â”‚
              â–¼                â–¼                â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  Auth Routes  â”‚ â”‚ Predict Routesâ”‚ â”‚ Health Routes â”‚
      â”‚  /api/v1/auth â”‚ â”‚/api/v1/predictâ”‚ â”‚   /health     â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                 â”‚
              â–¼                 â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  AuthUseCase  â”‚ â”‚PredictionUCaseâ”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                 â”‚
              â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚     â”‚                       â”‚
              â–¼     â–¼                       â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ UserRepositoryâ”‚             â”‚  PlayerStore  â”‚
      â”‚   (MongoDB)   â”‚             â”‚  (ChromaDB)   â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚   DixieAI     â”‚
                                    â”‚  (DeepSeek)   â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ InstalaciÃ³n

### Prerrequisitos

- Python 3.13+
- MongoDB (local o Atlas)
- uv (gestor de paquetes Python)

### Pasos

```bash
# 1. Clonar el repositorio
cd futbolia-backend

# 2. Crear entorno virtual e instalar dependencias
uv sync

# 3. Copiar archivo de configuraciÃ³n
cp .env.template .env

# 4. Editar .env con tus valores
# Especialmente:
# - JWT_SECRET_KEY (genera una clave segura)
# - DEEPSEEK_API_KEY (obtener de platform.deepseek.com)
# - MONGODB_URI (si usas MongoDB Atlas)
```

---

## âš™ï¸ ConfiguraciÃ³n

### Variables de Entorno CrÃ­ticas

| Variable           | DescripciÃ³n                    | Requerido      |
| ------------------ | ------------------------------ | -------------- |
| `JWT_SECRET_KEY`   | Clave para firmar tokens JWT   | âœ… SÃ­          |
| `DEEPSEEK_API_KEY` | API key de DeepSeek para Dixie | âš ï¸ Recomendado |
| `MONGODB_URI`      | URI de conexiÃ³n a MongoDB      | âœ… SÃ­          |

### Generar JWT_SECRET_KEY

```bash
# Linux/Mac
openssl rand -hex 32

# Windows (PowerShell)
[Convert]::ToBase64String((1..32 | ForEach-Object { Get-Random -Maximum 256 }) -as [byte[]])
```

---

## â–¶ï¸ EjecuciÃ³n

### Desarrollo

```bash
# OpciÃ³n 1: Con uv
uv run python -m uvicorn src.main:app --reload --host 0.0.0.0 --port 8000

# OpciÃ³n 2: Directamente
uvicorn src.main:app --reload
```

### ProducciÃ³n

```bash
# Con mÃºltiples workers
uvicorn src.main:app --host 0.0.0.0 --port 8000 --workers 4
```

### Verificar que funciona

```bash
# Health check
curl http://localhost:8000/health

# DocumentaciÃ³n API
# Abrir en navegador: http://localhost:8000/docs
```

---

## ğŸ“¡ API Endpoints

### AutenticaciÃ³n

| MÃ©todo | Endpoint                   | DescripciÃ³n             |
| ------ | -------------------------- | ----------------------- |
| POST   | `/api/v1/auth/register`    | Registrar nuevo usuario |
| POST   | `/api/v1/auth/login`       | Iniciar sesiÃ³n          |
| GET    | `/api/v1/auth/me`          | Obtener perfil actual   |
| PUT    | `/api/v1/auth/preferences` | Actualizar preferencias |

### Predicciones

| MÃ©todo | Endpoint                      | DescripciÃ³n               |
| ------ | ----------------------------- | ------------------------- |
| POST   | `/api/v1/predictions/predict` | Generar predicciÃ³n        |
| GET    | `/api/v1/predictions/history` | Historial de predicciones |
| GET    | `/api/v1/predictions/matches` | Partidos disponibles      |

### Sistema

| MÃ©todo | Endpoint  | DescripciÃ³n           |
| ------ | --------- | --------------------- |
| GET    | `/health` | Estado del servidor   |
| GET    | `/docs`   | DocumentaciÃ³n Swagger |
| GET    | `/redoc`  | DocumentaciÃ³n ReDoc   |

---

## ğŸ“ Estructura del Proyecto

```
futbolia-backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â””â”€â”€ config.py          # ConfiguraciÃ³n y settings
â”‚   â”œâ”€â”€ domain/
â”‚   â”‚   â””â”€â”€ entities.py        # Entidades del dominio
â”‚   â”œâ”€â”€ infrastructure/
â”‚   â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â”‚   â”œâ”€â”€ mongodb.py     # Cliente MongoDB
â”‚   â”‚   â”‚   â”œâ”€â”€ user_repository.py
â”‚   â”‚   â”‚   â””â”€â”€ prediction_repository.py
â”‚   â”‚   â”œâ”€â”€ chromadb/
â”‚   â”‚   â”‚   â”œâ”€â”€ player_store.py    # Vector store
â”‚   â”‚   â”‚   â””â”€â”€ seed_data.py       # Datos iniciales
â”‚   â”‚   â”œâ”€â”€ llm/
â”‚   â”‚   â”‚   â””â”€â”€ dixie.py       # IntegraciÃ³n DeepSeek
â”‚   â”‚   â””â”€â”€ external_api/
â”‚   â”‚       â””â”€â”€ football_api.py    # API externa
â”‚   â”œâ”€â”€ use_cases/
â”‚   â”‚   â”œâ”€â”€ auth.py            # LÃ³gica de autenticaciÃ³n
â”‚   â”‚   â””â”€â”€ prediction.py      # LÃ³gica de predicciÃ³n
â”‚   â”œâ”€â”€ presentation/
â”‚   â”‚   â”œâ”€â”€ auth_routes.py     # Rutas de auth
â”‚   â”‚   â””â”€â”€ prediction_routes.py   # Rutas de predicciÃ³n
â”‚   â””â”€â”€ main.py                # Entry point
â”œâ”€â”€ data/
â”‚   â””â”€â”€ chromadb/              # Datos persistentes ChromaDB
â”œâ”€â”€ .env.template              # Template de configuraciÃ³n
â”œâ”€â”€ pyproject.toml             # Dependencias
â””â”€â”€ README.md                  # Este archivo
```

---

## ğŸ”’ Seguridad

### Implementada

- âœ… AutenticaciÃ³n JWT con tokens seguros
- âœ… Hash de contraseÃ±as con bcrypt
- âœ… CORS configurado
- âœ… ValidaciÃ³n de datos con Pydantic
- âœ… Variables de entorno para secretos

### Recomendaciones para ProducciÃ³n

1. **Cambiar `JWT_SECRET_KEY`** - Usar una clave generada aleatoriamente
2. **HTTPS** - Usar certificado SSL/TLS
3. **Rate Limiting** - Implementar lÃ­mites de requests
4. **MongoDB Auth** - Usar autenticaciÃ³n en la base de datos
5. **Logs** - Configurar logging estructurado

---

## ğŸ§ª Testing

```bash
# Ejecutar tests
uv run pytest

# Con cobertura
uv run pytest --cov=src
```

---

## ğŸ“ Licencia

Casa Abierta ULEAM 2025 - MinerÃ­a de Datos - 5to Semestre

---

## ğŸ‘¥ Autores

- Proyecto FutbolIA - Dixie AI
